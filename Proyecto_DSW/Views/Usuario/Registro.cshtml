@model Proyecto_DSW.Models.Usuario

@{
    ViewData["Title"] = "Registro de Usuario";
}

<link rel="stylesheet" href="~/css/Registro.css" />

<div class="registro-container">
    <!-- Decoraciones de fondo -->
    <div class="registro-decoration decoration-1"></div>
    <div class="registro-decoration decoration-2"></div>
    <div class="registro-decoration decoration-3"></div>

    <div class="registro-card">
        <div class="registro-header">
            <h2>Registro</h2>
            <p class="registro-subtitle">Crea tu cuenta para comenzar</p>
        </div>

        <form asp-action="Registro" method="post" class="registro-form" novalidate>
            <div class="form-group-registro">
                <label asp-for="nombre" class="form-label-registro">Nombre</label>
                <input asp-for="nombre" class="form-control-registro" placeholder="Ingresa tu nombre" required />
                <span asp-validation-for="nombre" class="text-danger-registro"></span>
            </div>

            <div class="form-group-registro">
                <label asp-for="apellido" class="form-label-registro">Apellido</label>
                <input asp-for="apellido" class="form-control-registro" placeholder="Ingresa tu apellido" required />
                <span asp-validation-for="apellido" class="text-danger-registro"></span>
            </div>

            <div class="form-group-registro">
                <label asp-for="correo" class="form-label-registro">Correo electrónico</label>
                <input asp-for="correo" type="email" class="form-control-registro" placeholder="tu@correo.com" required />
                <span asp-validation-for="correo" class="text-danger-registro"></span>
            </div>

            <div class="form-group-registro">
                <label asp-for="contrasena" class="form-label-registro">Contraseña</label>
                <input asp-for="contrasena" type="password" class="form-control-registro" placeholder="Crea una contraseña segura" required />
                <span asp-validation-for="contrasena" class="text-danger-registro"></span>
                <div class="password-strength">
                    <div class="strength-bar" id="passwordStrength"></div>
                </div>
            </div>

            <button type="submit" class="btn-registrarse" id="registerButton">
                Registrarse
            </button>
        </form>

        <div class="registro-footer">
            <p>¿Ya tienes una cuenta?</p>
            <a asp-action="Login" asp-controller="Login" class="login-link">Inicia sesión aquí</a>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Validación y efecto de carga
        (() => {
            'use strict'
            const form = document.querySelector('.registro-form')
            const registerButton = document.getElementById('registerButton')
            const passwordInput = document.querySelector('input[type="password"]')
            const strengthBar = document.getElementById('passwordStrength')

            if (form) {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    } else {
                        registerButton.classList.add('loading')
                    }
                    form.classList.add('was-validated')
                }, false)
            }

            // Indicador de fortaleza de contraseña
            if (passwordInput && strengthBar) {
                passwordInput.addEventListener('input', function() {
                    const password = this.value
                    let strength = 0

                    if (password.length > 0) strength++
                    if (password.length >= 8) strength++
                    if (/[A-Z]/.test(password)) strength++
                    if (/[0-9]/.test(password)) strength++
                    if (/[^A-Za-z0-9]/.test(password)) strength++

                    strengthBar.className = 'strength-bar'
                    if (strength <= 2) {
                        strengthBar.classList.add('strength-weak')
                    } else if (strength <= 4) {
                        strengthBar.classList.add('strength-medium')
                    } else {
                        strengthBar.classList.add('strength-strong')
                    }
                })
            }
        })()
    </script>
}